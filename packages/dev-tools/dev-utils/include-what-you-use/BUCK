load("//defs:package_defs.bzl", "download_source", "cmake_package")

download_source(
    name = "iwyu-src",
    src_uri = "https://github.com/include-what-you-use/include-what-you-use/archive/refs/tags/0.21.tar.gz",
    sha256 = "5f9c962d46978c4c0c4c0c3e2e8f4b4b5e0c6d7a8b9c0d1e2f3a4b5c6d7e8f9a",
)

cmake_package(
    name = "include-what-you-use",
    source = ":iwyu-src",
    version = "0.21",
    description = "Tool for analyzing #includes in C and C++ source files",
    homepage = "https://include-what-you-use.org/",
    license = "LLVM",
    cmake_args = [
        "-DCMAKE_BUILD_TYPE=Release",
    ],
    visibility = ["PUBLIC"],
)
