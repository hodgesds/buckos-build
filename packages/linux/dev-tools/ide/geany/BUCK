load("//defs:package_defs.bzl", "download_source", "configure_make_package")
load("//defs:use_flags.bzl", "use_package", "set_use_flags")

# geany - Lightweight IDE and text editor

use_package(
    name = "geany",
    version = "2.0",
    src_uri = "https://download.geany.org/geany-2.0.tar.bz2",
    sha256 = "565b4cd2f0311c1e3a167ec71c4a32dba642e0fe554ae5bb6b8177b7a74ccc92",
    description = "Lightweight IDE and text editor using GTK",
    homepage = "https://www.geany.org",
    license = "GPL-2+",

    # USE flags this package supports
    iuse = [
        "vte",
        "plugins",
        "nls",
        "doc",
    ],

    # Default USE flags
    use_defaults = ["vte", "plugins", "nls"],

    # Conditional dependencies
    use_deps = {
        "vte": ["//packages/linux/desktop/gnome:vte"],
    },

    # Conditional configure arguments
    use_configure = {
        "vte": "--enable-vte",
        "-vte": "--disable-vte",
        "plugins": "--enable-plugins",
        "-plugins": "--disable-plugins",
        "nls": "--enable-nls",
        "-nls": "--disable-nls",
        "doc": "--enable-html-docs",
        "-doc": "--disable-html-docs",
    },

    # Base configure arguments (always applied)
    configure_args = [
        "--prefix=/usr",
        "--sysconfdir=/etc",
    ],

    deps = [
        "//packages/linux/desktop/gnome:gtk3",
    ],
    visibility = ["PUBLIC"],
)
