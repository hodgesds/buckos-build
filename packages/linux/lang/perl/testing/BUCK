load("//defs:package_defs.bzl", "download_source", "configure_make_package")

# Test::Simple - Basic utilities for writing tests
download_source(
    name = "test-simple-src",
    src_uri = "https://cpan.metacpan.org/authors/id/E/EX/EXODIST/Test-Simple-1.302199.tar.gz",
    sha256 = "7b4e3c2c2e14bd92fb7aaab14fe9cd253d26e9f4f5c679b71a39f3c96353e48c",
)

configure_make_package(
    name = "test-simple",
    source = ":test-simple-src",
    version = "1.302199",
    description = "Basic utilities for writing tests",
    homepage = "https://metacpan.org/pod/Test::Simple",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX=$OUT/usr INSTALLDIRS=vendor
    """,
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)

# Test::Deep - Extremely flexible deep comparison
download_source(
    name = "test-deep-src",
    src_uri = "https://cpan.metacpan.org/authors/id/R/RJ/RJBS/Test-Deep-1.204.tar.gz",
    sha256 = "b6591f6ccdd853c7efc9ff3c5756b1c9a7ec5f65d51ed4d35dccbc9f9bc63531",
)

configure_make_package(
    name = "test-deep",
    source = ":test-deep-src",
    version = "1.204",
    description = "Extremely flexible deep comparison",
    homepage = "https://metacpan.org/pod/Test::Deep",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX=$OUT/usr INSTALLDIRS=vendor
    """,
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)

# Test::Exception - Test exception-based code
download_source(
    name = "test-exception-src",
    src_uri = "https://cpan.metacpan.org/authors/id/E/EX/EXODIST/Test-Exception-0.43.tar.gz",
    sha256 = "156b13f07764f766d8b45a3f59f5e49571f34b0d3f89e0e00eaad2d3e8d50347",
)

configure_make_package(
    name = "test-exception",
    source = ":test-exception-src",
    version = "0.43",
    description = "Test exception-based code",
    homepage = "https://metacpan.org/pod/Test::Exception",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX=$OUT/usr INSTALLDIRS=vendor
    """,
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        ":test-simple",
    ],
    visibility = ["PUBLIC"],
)

# Test::Warn - Perl extension to test methods for warnings
download_source(
    name = "test-warn-src",
    src_uri = "https://cpan.metacpan.org/authors/id/B/BI/BIGJ/Test-Warn-0.37.tar.gz",
    sha256 = "98ca32e7f2f5ea89b8bfb9a0609977b3d153e242e2e51705126cb954f1a06b57",
)

configure_make_package(
    name = "test-warn",
    source = ":test-warn-src",
    version = "0.37",
    description = "Perl extension to test methods for warnings",
    homepage = "https://metacpan.org/pod/Test::Warn",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX=$OUT/usr INSTALLDIRS=vendor
    """,
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        ":test-simple",
    ],
    visibility = ["PUBLIC"],
)

# Test::MockObject - Perl extension for emulating troublesome interfaces
download_source(
    name = "test-mockobject-src",
    src_uri = "https://cpan.metacpan.org/authors/id/C/CH/CHROMATIC/Test-MockObject-1.20200122.tar.gz",
    sha256 = "2b7f80c3a6e326c4a8a9c8ad9c6ce79e2d779d7b5f4c9dd193fa5c2c2bb14cc3",
)

configure_make_package(
    name = "test-mockobject",
    source = ":test-mockobject-src",
    version = "1.20200122",
    description = "Perl extension for emulating troublesome interfaces",
    homepage = "https://metacpan.org/pod/Test::MockObject",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX=$OUT/usr INSTALLDIRS=vendor
    """,
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        ":test-simple",
    ],
    visibility = ["PUBLIC"],
)

# Test::Mock::Time - Deterministic time & timers for event loops
download_source(
    name = "test-mock-time-src",
    src_uri = "https://cpan.metacpan.org/authors/id/P/PO/POWERMAN/Test-Mock-Time-0.2.1.tar.gz",
    sha256 = "c78a0dda8ed59d5d48ff4c3aa67f3f20a5f32f5f5ba7af5c5d8f5e5b8e0d8c5e",
)

configure_make_package(
    name = "test-mock-time",
    source = ":test-mock-time-src",
    version = "0.2.1",
    description = "Deterministic time & timers for event loops",
    homepage = "https://metacpan.org/pod/Test::Mock::Time",
    license = "MIT",
    pre_configure = """
        perl Makefile.PL PREFIX=$OUT/usr INSTALLDIRS=vendor
    """,
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)

# Test::NoWarnings - Make sure you didn't emit any warnings
download_source(
    name = "test-nowarnings-src",
    src_uri = "https://cpan.metacpan.org/authors/id/A/AD/ADAMK/Test-NoWarnings-1.06.tar.gz",
    sha256 = "c2dc51143b7eb63231210e27df20d1c8654d6fd3c8f0c6d6c4eadb9a2f9d0a5a",
)

configure_make_package(
    name = "test-nowarnings",
    source = ":test-nowarnings-src",
    version = "1.06",
    description = "Make sure you didn't emit any warnings while testing",
    homepage = "https://metacpan.org/pod/Test::NoWarnings",
    license = "LGPL-2.1-only",
    pre_configure = """
        perl Makefile.PL PREFIX=$OUT/usr INSTALLDIRS=vendor
    """,
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        ":test-simple",
    ],
    visibility = ["PUBLIC"],
)

# Test::Differences - Test strings and data structures for differences
download_source(
    name = "test-differences-src",
    src_uri = "https://cpan.metacpan.org/authors/id/D/DC/DCANTRELL/Test-Differences-0.71.tar.gz",
    sha256 = "cce0ee78af0b13e02c7d5e07a5e5de09ebb4e2ac8e14c14e03b29a9b87d38cbf",
)

configure_make_package(
    name = "test-differences",
    source = ":test-differences-src",
    version = "0.71",
    description = "Test strings and data structures and show differences",
    homepage = "https://metacpan.org/pod/Test::Differences",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX=$OUT/usr INSTALLDIRS=vendor
    """,
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        ":test-simple",
        "//packages/linux/lang/perl/text:text-diff",
    ],
    visibility = ["PUBLIC"],
)

# Test::Most - Most commonly needed test functions and features
download_source(
    name = "test-most-src",
    src_uri = "https://cpan.metacpan.org/authors/id/O/OV/OVID/Test-Most-0.38.tar.gz",
    sha256 = "0f84a9bda9a766f8d9e23aac389d93ad05cf7e0b2a63c46e8c1e5a8ee5ed4f6a",
)

configure_make_package(
    name = "test-most",
    source = ":test-most-src",
    version = "0.38",
    description = "Most commonly needed test functions and features",
    homepage = "https://metacpan.org/pod/Test::Most",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX=$OUT/usr INSTALLDIRS=vendor
    """,
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        ":test-simple",
        ":test-deep",
        ":test-differences",
        ":test-exception",
        ":test-warn",
    ],
    visibility = ["PUBLIC"],
)

# Test::Fatal - Incredibly simple helpers for testing code with exceptions
download_source(
    name = "test-fatal-src",
    src_uri = "https://cpan.metacpan.org/authors/id/R/RJ/RJBS/Test-Fatal-0.017.tar.gz",
    sha256 = "37dfffdafb84b762efe96b02fb2aa41f37026c73e6b83590db76229697f3c4a6",
)

configure_make_package(
    name = "test-fatal",
    source = ":test-fatal-src",
    version = "0.017",
    description = "Incredibly simple helpers for testing code with exceptions",
    homepage = "https://metacpan.org/pod/Test::Fatal",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX=$OUT/usr INSTALLDIRS=vendor
    """,
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        "//packages/linux/lang/perl/core:try-tiny",
    ],
    visibility = ["PUBLIC"],
)

# Test::Requires - Checks to see if the module can be loaded
download_source(
    name = "test-requires-src",
    src_uri = "https://cpan.metacpan.org/authors/id/T/TO/TOKUHIROM/Test-Requires-0.11.tar.gz",
    sha256 = "4b88de549597d9d4088a64c3f3d8e71f9f70d05d43d0f01d56b4d735eed44a59",
)

configure_make_package(
    name = "test-requires",
    source = ":test-requires-src",
    version = "0.11",
    description = "Checks to see if the module can be loaded",
    homepage = "https://metacpan.org/pod/Test::Requires",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX=$OUT/usr INSTALLDIRS=vendor
    """,
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)

# Test::Output - Utilities to test STDOUT and STDERR messages
download_source(
    name = "test-output-src",
    src_uri = "https://cpan.metacpan.org/authors/id/B/BD/BDFOY/Test-Output-1.033.tar.gz",
    sha256 = "f6a8482740b176c5d8eb4d5e0c96f2c9c1c8a4c1a9d39f7a9e8f4c5d3e1b2a90",
)

configure_make_package(
    name = "test-output",
    source = ":test-output-src",
    version = "1.033",
    description = "Utilities to test STDOUT and STDERR messages",
    homepage = "https://metacpan.org/pod/Test::Output",
    license = "Artistic-2.0",
    pre_configure = """
        perl Makefile.PL PREFIX=$OUT/usr INSTALLDIRS=vendor
    """,
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)

# Test::Pod - Check for POD errors in files
download_source(
    name = "test-pod-src",
    src_uri = "https://cpan.metacpan.org/authors/id/E/ET/ETHER/Test-Pod-1.52.tar.gz",
    sha256 = "60a8dbcc60168bf1daa5cc2350236df9343e9878f4ab8f70ad291b9bd8a40b97",
)

configure_make_package(
    name = "test-pod",
    source = ":test-pod-src",
    version = "1.52",
    description = "Check for POD errors in files",
    homepage = "https://metacpan.org/pod/Test::Pod",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX=$OUT/usr INSTALLDIRS=vendor
    """,
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)

# Test::Pod::Coverage - Check for pod coverage in your distribution
download_source(
    name = "test-pod-coverage-src",
    src_uri = "https://cpan.metacpan.org/authors/id/N/NE/NEILB/Test-Pod-Coverage-1.10.tar.gz",
    sha256 = "48c9cca9f7d99eee741176445b431cdf99d80e39df56ba36d6c0c4dd36bf8b7a",
)

configure_make_package(
    name = "test-pod-coverage",
    source = ":test-pod-coverage-src",
    version = "1.10",
    description = "Check for pod coverage in your distribution",
    homepage = "https://metacpan.org/pod/Test::Pod::Coverage",
    license = "Artistic-2.0",
    pre_configure = """
        perl Makefile.PL PREFIX=$OUT/usr INSTALLDIRS=vendor
    """,
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
        ":test-pod",
    ],
    visibility = ["PUBLIC"],
)

# Devel::Cover - Code coverage metrics for Perl
download_source(
    name = "devel-cover-src",
    src_uri = "https://cpan.metacpan.org/authors/id/P/PJ/PJCJ/Devel-Cover-1.44.tar.gz",
    sha256 = "8b92c693e25ab85a17e93e8ba62e7d2a0b6c6c7e0f1d15b1d9f1c3de1f7c8a4e",
)

configure_make_package(
    name = "devel-cover",
    source = ":devel-cover-src",
    version = "1.44",
    description = "Code coverage metrics for Perl",
    homepage = "https://metacpan.org/pod/Devel::Cover",
    license = "Artistic-1.0-Perl OR GPL-1.0-or-later",
    pre_configure = """
        perl Makefile.PL PREFIX=$OUT/usr INSTALLDIRS=vendor
    """,
    configure_args = [],
    deps = [
        "//packages/linux/lang/perl:perl",
    ],
    visibility = ["PUBLIC"],
)
