load("//defs:package_defs.bzl", "download_source", "configure_make_package")
load("//defs:use_flags.bzl", "use_package", "set_use_flags")
load("//defs:platform_defs.bzl", "PLATFORM_MACOS")

use_package(
    name = "ncurses",
    version = "6.5",
    src_uri = "https://mirrors.kernel.org/gnu/ncurses/ncurses-6.5.tar.gz",
    sha256 = "136d91bc269a9a5785e5f9e980bc76ab57428f604ce3e5a5a90cebc767971cc6",
    auto_detect_signature=False,
    description = "Terminal handling library",
    homepage = "https://www.gnu.org/software/ncurses/",
    license = "MIT",

    # USE flags this package supports
    iuse = [
        "unicode",
        "static-libs",
    ],

    # Default USE flags
    use_defaults = ["unicode"],

    # Conditional configure arguments
    use_configure = {
        "unicode": "--enable-widec",
        "-unicode": "--disable-widec",
        "static-libs": "--with-static",
        "-static-libs": "--without-static",
    },

    # Base configure arguments (always applied)
    configure_args = [
        "--with-shared",
        "--with-cxx-shared",
        "--enable-pc-files",
        "--with-pkg-config-libdir=/usr/local/lib/pkgconfig",
        "--enable-sigwinch",
        "--enable-symlinks",
        "--without-manpages",
    ],

    maintainers = ["mac-team"],
    visibility = ["PUBLIC"],
)
