load("//defs:package_defs.bzl", "download_source", "binary_package")

download_source(
    name = "meson-src",
    src_uri = "https://github.com/mesonbuild/meson/releases/download/1.3.1/meson-1.3.1.tar.gz",
    sha256 = "6020568bdede1643d4fb41e28215be38eff5d52da28ac7d125457c59e0032ad7",
)

binary_package(
    name = "meson",
    srcs = [":meson-src"],
    version = "1.3.1",
    description = "High productivity build system",
    homepage = "https://mesonbuild.com/",
    license = "Apache-2.0",
    install_script = """
        cd "$WORK_DIR/meson-1.3.1"
        python3 setup.py build
        python3 setup.py install --root="$DESTDIR" --prefix=/usr
    """,
    visibility = ["PUBLIC"],
)
