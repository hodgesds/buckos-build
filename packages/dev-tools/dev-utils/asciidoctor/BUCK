load("//defs:package_defs.bzl", "download_source", "precompiled_package")

download_source(
    name = "asciidoctor-src",
    src_uri = "https://github.com/asciidoctor/asciidoctor/archive/refs/tags/v2.0.23.tar.gz",
    sha256 = "a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8",
)

precompiled_package(
    name = "asciidoctor",
    source = ":asciidoctor-src",
    version = "2.0.23",
    description = "Converter for transforming AsciiDoc content to various formats",
    homepage = "https://asciidoctor.org/",
    license = "MIT",
    install_script = """
        mkdir -p "$PREFIX/bin" "$PREFIX/lib/asciidoctor"
        cp -r lib/* "$PREFIX/lib/asciidoctor/"
        cp bin/asciidoctor "$PREFIX/bin/"
        chmod +x "$PREFIX/bin/asciidoctor"
    """,
    visibility = ["PUBLIC"],
)
